200106_jsp_오후


이미지 업로드 아직 하는중~~~

String path = "c:\data\images"  일때
mkdir(path) 가 true이려면 c:\data까지가 이미 존재해야함
mkdirs(path) 는 무조건 true. 없는 경로는 알아서 만들어줌


form에 데이터는 결국 파라미터-밸류잖아 뭐 input이건 select, textarea이건..
근데 파일<- File 데이터만 그냥 File임
form에는 전부 append 하는 형태로 들어가거든...


고유한 이름을 만들어주려고하는데 UUID가 그런역할을 해줌


글 등록할때 이미지를 업로드하면 
workspace / ~ .metadate/ ~~ / context path ~~~/ resources / images 가면 이미지가있다!
근데 이대로하면 프로젝트 망칩니다(?)
지금 배포폴더에 이미지가 들어있거든
톰캣에서 이 배포를 중단해버리면 여기에 들어갔던 이미지가 싹다날라간다
서버에서 프로젝트를 언디플로이(서버 중단, 프로젝트 지워버려) 하고 서버돌리면
배포폴더가 날라갑니다
근데 다시 add해서 다시 배포하잖아?
그럼 아까 이미지 다 날아갔어서 이미지고나발이고 없어졌다 임마

그래서 저장하는 경로를 properties에 저장할거고
그걸 resourceBundle로 읽어올거란말여
그럼 최종적으로 관리자화면에는 properties를 바꿀수있는 화면이 나와야되는거야
외부에서 저장경로를 읽어서 하게하는 url upload에 대한 properties 파일을 만들거야!!!


** 관리자화면
이어플리케이션을 유지보수하는 화면 
properties를 각각 ""화면으로""열어서 수정할수있어야겠지


업로드용 properties를 만들었고 이걸 읽어오는 GetUploadPath 클래스 만들었음
여기에 getUploadPath라는 메서드 만들어서 
나중에 이 메서드를 키(=주소줄)와 함께 호출하면
거기에 해당하는 uploadPath 문자열(=key에 해당하는 클래스겠지) 반환


파일을 보내는법
= 내 로컬에 있는 파일을 스트림에 담아서 out으로 보내는거


서머노트 에디터를 달았다? 
그럼 이미지 업로드/다운로드는 전부 GetImgAction 이것이 될것입니다...


문자 split할때는 spring 정규식을 따라야해 무조건!
$ -> 이거는 이미 정규식에 있어서 안돼
그래서 앞에 \를 줘야하거든 근데 \도 정규식에있어
그래서 \를 두번쓴    \\$ --> 이게 \$ 이걸로 읽히는거임


우리가 만든게 이미지게시판 (이미지를 추가하는 게시판이랴,,,)


우리가 ajax로 파일 다운로드,업로드도 해봤고
일반 텍스트 주고받는것도 해봤습니다
다 RESTful로 구현했어
화면으로 구현하는게 아니고 화면에서 필요한것들만 리턴하는거



내일은 오전에 회원등록 할거고요
오후에 자료실 할겁니더
회원등록은 ajax, 이미지 다운/업로드 할거고요 (form만 쓸거임 summernote 말고)
자료실에서 파일첨부는 submit으로 등록할거임

이렇게하면 자료첨부 방법 다써보는거지?
동기방식 : submit
비동기 : ajax
동기방식으로 텍스트/파일 전송
비동기방식으로 텍스트/파일 전송

동기방식으로 텍스트 : 글등록
비동기 텍스트 : 댓글
비동기 파일 : summernote인거, summernote가 아닌거
동기 파일 : 자료실

