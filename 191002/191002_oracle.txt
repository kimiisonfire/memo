191002_oracle

데이터베이스 설계 및 구축1 81p

정규화는 1->2->3,, 이렇게 순차적으로 해야하는건 아님
그냥 이름이 그렇게 붙은것뿐임다 한꺼번에 할수도있거든
정규화는 db쪽으로 실무를 하게될경우에는 반드시 공부해야할부분임

제 2 정규화
키가 복합키인 경우에만 해당 
기본키를 제외한 나머지 일반항목들은 두개이상인 복합키에 완전 함수종속되어야함
근데 부분종속이 발생할수도있거든
그러면 부분종속된부분으로 구성된 릴레이션을 새로 만들고, 
>>> 새로 생성된 릴레이션이 원본 릴레이션의 상위 릴레이션이 되어야함. 상위릴레이션의 기본키를 원본릴레이션이 받아쓸수있도록!!! <<< 이거 중요해

83p
상품명과 단가는 오로지 상품번호에만 종속...!
상품관련 내용만 담은 테이블을 따로 만들고, 걔는 주문상품테이블의 상위 릴레이션이됨
	
꼭 나중에 만들때 주문테이블하고 장바구니 테이블 = 주문상품 테이블 따로만들어라


제 3 정규화 86p
일반항목끼리 종속관계가 맺어지는 경우!
= 일반항목이 후보식별자가 되어지는 경우 (네?!?)
이행종속이 발생되어서, 이행종속이 발생된 일반속성을 별도로 떼서 결정자를 키로하고 종ㅅ속자를 일반항목으로하는 별도의 릴레이션을 만들고 이 릴레이션이 원본 릴레이션의 상위 릴레이션이 되도록해!!!!
상위 테이블의 기본키를 원본 릴레이션의 일반항목 외래키가 되도록헙니다!!!
>>>> 2정규화랑 헷갈리지마슈 <<<<

모든 3정규화는 BC정규화이고 모든 BC정규화는 3정규화일수도있고 아닐수도있고
BC정규화 :: 기본키 B, 일반속성 C 있으면 B가 C에 종속될때! 

88p 고객번호가 기본키가 아닌데, 고객명은 고객번호에의해 결정되는칭구칭긔잖아
((이런걸 구분할수있는건 A가 바뀔때 B도 바뀐다..! 이렇게))
두 일반항목끼리 종속관계가 발생하기때문에, 둘중에 결정자역할을하는 고객번호를기본키, 종속자역할을하는 고객명을 일반항목으로하고 원본 릴레이션의 상위 릴레이션으로 하면댐! 여기서 고객번호를 굳이 기본키로 만들필요는 읎다.., 

여기까지!






아 오라클 가볼게여 sql Developer 시작헙니다
포트는 1521 쓰고요, sid는 express version이라 xe랍니다,,

오라클은 깔면 계정을 3개줌
system, sys = 관리자계정. 사용자를 만들수가있어 테이블도만들고 뭐 그런
tiger = 일반계정. 이걸로 들어가서 테스트해봐라 하는거 근데우린 안쓸겨
system 계정의 특징 : 굉장ㅎ시 많은 임시테이블을 가지고있음

근데 실패라고 뜬단말여 이제 되게 해봅시다!
컴퓨터->오른쪽키->관리
서비스및응용프로그램 더블클릭 -> 서비스 -> 지금 돌아가거나 대기상태인 서비스들이 다뜸
OracleJobSchedulerXE 오른쪽키 속성 -> 시작유형을 자동으로 바꾸고 적용->시작->확인
OracleServiceXE , OracleXETNSListener 얘네도 똑같이!

그다음에 다시 오라클에서 초록색 + 누르고 테스트하면 성공뜸! 
그다음에 접속 누르면 워크시트가 뜹니다!!!

내이름 옆에 +를 누르면 쭉나오는데 얘네가 오라클 객체, Object들임
우리는 이걸 배울거임!!

테이블 + 눌러보면 테이블 개많음 안만들었는데도 있습니뎌
얘네는 절대 지우면 안돼.. 사용자가 데이터를 crud할때 원활하게 하도록 저장하는거임
그래서 여기다가 사용자 테이블을 만들면 테이블을 관리하기 굉장히힘들다
그래서 사용자 계정을 만들어야혀

알아보기쉽게 도구->환경설정->코드편집기-> pl/sql 구문색상의 ps/sql 주석을 빨간색으로 바꿨음, 글꼴크기도바꿨음
그리고 도구->환경설정->데이터베이스->NLS의 날짜형식이 rr/MM/DD 되어있거든
이러면 19/09/09 이렇게나옴 우리는 YYYY/MM/DD 로 가겠음

그다음에 워크시트에서 select sysdate from dual;  -> ctrl+enter 하면  2019/10/02 뜹니다
실행할때는 워크시트 위의 재생버튼 누르던가 ctrl+enter하던가 하세요
대소문자 구별 X


- 사용자 계정 생성 
CREATE USER [계정명] IDENTIFIED BY [암호];
삭제시에는 DROP

CREATE USER KHY IDENTIFIED BY java;  -> ctrl+enter
--> User KHY이 생성되었습니다 라고 뜸

- 그리고 권한부여해줌
GRANT CONNECT, RESOURCE, DBA TO KHY;
--> Grant를 성공했습니다 뜸

이상태로 왼쪽창의 십자가눌러서 
접속 이름, 사용자이름, 비밀번호, 저장하고 색깔선택하고 테스트하고 접속!
앞으로는 여기로 접속할거여!!!!



>>>>>> 내 계정 >>>
* 관리자
kimi system java
* 유저
KHY KHY java
>>>>>>>>>>>>>>>

이 계정에서 base_table.sql (d드라이브에 오라클/other)에있음 열고
1~784 블락해서 실행! 하면 테이블이 방금 생겼다!!
유저계정에서 테이블 들어가서 데이터 들어가면 생겨있음!

오라클은 막 실시간으로 반영이안된다 ! 그래서 십자가 옆의 reload를 눌러주면됨
그래도 안된다? 테이블을 접고 reload 누르고 다시 + 열어!

얘는 하다가 뭐 잘못해도 상관없음!
다시 base_table.sql 열어서 1~784 실행하면 또 생기는데요뭐



오라클_데이터베이스_교안 80p

>>erwin<< 설치합니듀

교육용으로 쓰는거고 실무에서는 잘안씀 유료라서 trial버전 쓸건데
그러면 나중에 진짜 필요할때 못쓸수가있음...! 재설치가안돼....!!
그래서 일단 이렇게쓰고 
나중에 앤코아에서 만든 da#5 를 써보는것을 추천하시네여 (윈도우만있음)

b_util/71 er-win 설치! 설치폴더 경로도 안바꾸고 걍 next 하면댐
그러면 라이센스 어쩌고가 뜨거든
여기서 data modeler r7 누르고 아래 라이센스 키에 
RPQEU - NL3L7 - PWQTU - 4KBMW - C232A  입력! (얘는 트라이얼버전 라이센스키임)
add 하고 continue 하면 시작화면이 뜹니다!!!!


막 열면 logical/physical 두개만뜸 
file/new -> logical/physical 누르면 쓰고있는 database 뭔지 버전뭔지 지가 체크함
ok 하면 main subject area 라는 워크시트가 뜹니듀!

format -> entity display -> attribute datatype 체크!
model -> model properties -> notation 에서 IE로 둘다 바꿔줘!
그럼 위에 툴? 부분 오른쪽 끝에 네모, 동그라미, 선 이런친구들 생김


교안 94p를 직접 그려볼거임
logical 오른쪽 옆에 entity 를 선택하고 워크시트를 클릭하면 
테이블명을 밖에 적을수있게 생김다

1) 사원테이블 만들기
테이블명을 사원 적어주고
아래 빈칸을 오른쪽마우스 누르면 attribute 뜨고 클릭해서 new 
attribute name에 사원번호, 넣어주는데 한글순서가 이상해질수있어서 스페이스쳐줘
datatype에서  타입을 99p 참고해서 설정하고 다시 general에서 primary key 체크
사원명도 넣어줄건데 datatype이 varchar2 임. 얘는 가변길이. varchar2 타입으로하고 길이를 10 해주면 10바이트 미만의 자료를 넣어주면 남은부분은 공백이 아니라 걍 없애줌!
다른 dbms는 varchar만 지원하고 오라클만 varchar2 지원함
하여튼 다 적어주면 사원테이블 만들어짐!!!

..... 근무테이블 만들기!
외래키를 기본키로쓰는데 외래키는 new 해주면 안됨!
일단 투입일만 만들고 entity 옆에 오리발같은거 쓸거임
사원번호가 근무테이블의 키 항목이 될때는 identifying
사원번호가 근무테이블의 일반항목이 될때는 non-identifying
오리발 맨왼쪽을 누른다음에 부모테이블->자식테이블 순서로 클릭!
그러면 각 부모테이블의 기본키가 근무테이블의 기본키이자 외래키로 들어옴!!

,,,,, 차수 변경하기
기본으로 0or more으로 되어있는데 
반드시 한명이상이 있어야한다! 1ormore의 차수로 바꾸고싶으면 
선 클릭해서 마우스오른쪽 -> relationship properties -> cardinality를 1 or more 하셔


논리적단계에서는 사실 굳이 데이터타입 고려하지않아도 됨 원칙적으로는
근데 요즘에는 logical 단계에서 이미 사용해야할 dbms가 정해지는 경우가 많음
미리 설정하고 가는경우가 많으니까 그 dbms에서 사용하는 독특한(varchar2같은) 그런것들을 기술하는것도 나쁘지않다~

사업장자재 테이블의 사업장번호를 사업장 테이블에서 받아오기~~
일반항목이라서 비식별관계! 비식별 오리발로 사업장-사업장자재 눌러주면
비식별관계로 연결되고 사업장의 기본키가 사업장자재의 일반항목으로 들어옵니듀



이제는 한번 단어사전을 만들어볼게여
++ 오라클에서는 - 절대 안씁니듀 무조건 _ 쓸겁니듀
++++ 잘안된답니다 안만들게요~~


physical로 넘어가보기!
일단 여기로 넘어가면 데이터타입이 안뜸
format -> table display -> column data type 어쩌고 누르면 다시 타입이 뜹니듀

그리고 여기서 각각 영어로 바꿔줘야댐..
테이블명 오른쪽키 -> table properties -> 이름바꿔주고 close
속성들도 오른쪽키 -> columns -> rename 해주십셔...
이렇게 전부 영어로 바꿔주면 물리 테이블이 만들어져버린것..!


D:\A_TeachingMaterial\4.Oracle\oracleWork
여기에 날짜폴더 만들어서 그날 실습한 쿼리를 넣겠읍니다


객체 만들때 	: CREATE
데이터를 넣을떄 	: INSERT
데이터 변경할때	: UPDATE
데이터를 넣을때 	: DELETE
객체 삭제할때 	: DROP

오라클 한컬럼의 가장 큰 크기 = 4GB...! 도랏나요?

NULL 표기는 선택사항인데 NOT NULL인경우 NOT NULL을 반드시 입력해줘야해!
기본키설정명은 유일해야합니다ㅏ
외래키설정명은 참조하는 테이블명의 사용하는 컬럼에 부여된 이름! 얘도 유일해야함

참고로 예약어 = 파란색

외래키는 컬럼명을 각 테이블에서 가져올거아녀  만약에 두개의 테이블에서 가져오는거면
CONSTRAINT 외래키설정명1 FOREIGN KEY 사원번호
  REFERENCES 사원테이블(사원번호)
CONSTRAINT 외래키설정명2 FOREIGN KEY 사업장번호
  REFERENCES 사업장테이블(사업장번호)

근데 하나의 테이블에서 복합키를 받아오는거면
CONSTRAINT 외래키설정명 FOREIGN KEY 사원번호, 부서번호
  REFERENCES 사원테이블(사원번호, 부서번호)



과제까진아니지만 <<<<<<<<<<<<
디벨로퍼에서 사업장, 근무 테이블 만들어보십쇼
